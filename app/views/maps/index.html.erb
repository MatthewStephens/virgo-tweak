<div id="list_heading">Maps</div>

<div class="tool_content">

<%= link_to 'Add a new map', new_map_path %> | <%= link_to 'Administer Maps Users', maps_users_path %>

<% for map in @maps -%>
  <div id="map_<%= map.id %>">
    <div class="mapEntry">
	    <div class="mapName"><%= h map.library.name %>: <%= h map.description %></div>
      <div class="mapTools">[<%= link_to 'Edit Map', edit_map_path(map.id)%> | <%= link_to "Delete Map", map_url(map), :method => :delete, :confirm => 'Are you sure you want to delete this map and its call numbers? You cannot undo this.' %>]</div>
      <div class="mapUrl">URL: <%= h map.url %></div>
    </div>

  	<div class="mapGuides">    
	   Location and Call Number Ranges For this Map (not needed if there is only one map for the whole library)
    <% unless map.call_number_ranges.empty? %>
				<table border="1">
				<tr><th>Location</th><th>Call Number Range</th><th>Delete</th></tr>
	      <% map.call_number_ranges.each do |range| %>
						<tr>
	          <td><%= h range.location %></td><td><%= h range.call_number_range %></td>
	          <td><%= link_to "remove", call_number_range_path(range.id), :method => :delete, :confirm => 'Are you sure you want to delete this entry?' %></td>
						</tr>
	      <% end %>
			</table>
    <% end %>

		<% form_tag(call_number_ranges_path) do %>
			<%= select_tag :location, options_for_select(Location.find(:all, :order=>:value).collect{ |c| [c.value, c.value]}.insert(0, ""))   %>
			<%= text_field_tag(:call_number_range) %>
			<%= hidden_field_tag(:map_id, map.id) %>
			<%= submit_tag "Add" %>
		<% end %>
		</div>
  </div>
<% end -%>

</div>