var debugging=false;if(typeof console=="undefined"||typeof console.log=="undefined"){var console={log:function(){}}}else{if(!debugging&&typeof console!="undefined"){console.log=function(){}}}jQuery(document).ready(function(g){g.ajaxSetup({timeout:20000});function m(){var r=null;g("span.coverImage").not(".combined-results span.coverImage").each(function(t,v){var u=g(v);var s=u.attr("title");g.get("/catalog/"+s+"/image_load",function(x){var w=g(x);u.html(w)})})}function q(){if(g("#article_results_container").length>0){var u=g.getUrlVar("q");var r="";if(u){r="/articles?q="+u+"&catalog_select=all"}else{var t=g.getUrlVar("author")||"";var w=g.getUrlVar("journal")||"";var v=g.getUrlVar("title")||"";var s=g.getUrlVar("keyword")||"";r="/articles?search_field=advanced&author="+t+"&journal="+w+"&title="+v+"&keyword="+s+"&catalog_select=all"}g("#article_results_container").load(r,function(){g("#article_results_container").css("background","#FFF")})}}function k(){if(g("#folder_article_container").length>0){load_url="/folder/articles";g("#folder_article_container").load(load_url,function(){g("#folder_article_container").css("background","#FFF")})}}function e(){g(".addUserBookmarkForm .submitForm").click(function(s){s.preventDefault();var r=g(this);r.parent().html('This item is in <a href="/bookmarks">My Favorites</a>');r.parent().ajaxSubmit()})}function a(){g(".addFolderForm .submitForm").live("click",function(){var t={dataType:"json",beforeSubmit:s,success:r};var u=g(this).parent();u.ajaxSubmit(t);function s(x,w,v){u.children(".submitForm").addClass("saving-star");return true}function r(x,y,z,v){if(u.children("input[name='id']").length){var w=u.children("input[name='id']").val()}else{var w=u.children("input[name='article_id']").val()}u.closest(".folder_container").html('<a href="/folder/'+w+'" class="deleteFolder_link">Remove Star</a>');l(x.length)}return false});g(".deleteFolder_link").live("click",function(){var s=g(this);var r=g(this).attr("href").substring(8);s.closest(".folder_container").html('<form action="/folder" class="addFolderForm" method="post" name="folder'+r+'"><input id="id" name="id" type="hidden" value="'+r+'"><a href="/folder" class="submitForm">Add Star</a><input class="hide" id="submitFolderForm_'+r+'" name="commit" type="submit" value="Add Star"></form>');g.post(s.attr("href"),{_method:"delete"});return false})}function l(r){if(r>=100){g(document).colorbox({html:'<div id="folder_full_notice">You may only save up to 100 items in your starred item list.  Please <a href="/folder">view and export</a> any items you wish to preserve then <a class="clear_all close-notice" href="/folder/clear">clear the list</a> to add more items.</div>',open:true,title:"Starred Item List Full",height:"40%",width:"40%"})}}g(".close-notice").live("click",function(){g(document).colorbox.close()});function n(){g(".action_list").hover(function(){g(".list_body").show()},function(){g(".list_body").hide()})}function c(){var s=new Array();var r=g(".deleteFolder_link");r.each(function(t){s[t]=g(this).attr("href").substring(8)});return s}function d(){var s=new Array();var r=g(".addFolderForm .submitForm");r.each(function(t){if(g(this).siblings("input[name='id']").length){s[t]=g(this).siblings("input[name='id']").val()}else{s[t]=g(this).siblings("input[name='article_id']").val()}});return s}function i(){g("a.select_all").click(function(){var t=d();if(g(t).length>0){var s=g(this);var r=g("body.articles-page").length?{"article_id[]":t}:{"id[]":t};g.ajax({url:"/folder",type:"POST",dataType:"json",data:r,beforeSend:function(v,u){g(".addFolderForm .submitForm").addClass("saving-star");s.addClass("link_disabled")},success:function(v,w,u){g(".addFolderForm .submitForm").each(function(y){var x=g(this).siblings("input[name='id']").val();g(this).closest(".folder_container").html('<a href="/folder/'+x+'" class="deleteFolder_link">Remove Star</a>')});l(v.length);s.removeClass("link_disabled")}})}return false})}function h(){g("a.clear_all").live("click",function(s){var r=c();if(g(r).length>0){g(this).addClass("link_disabled");g(".deleteFolder_link").each(function(u){var v=g(this);var t=g(this).attr("href").substring(8);v.closest(".folder_container").html('<form action="/folder" class="addFolderForm" method="post" name="folder'+t+'"><input id="id" name="id" type="hidden" value="'+t+'"><a href="/folder" class="submitForm">Add Star</a><input class="hide" id="submitFolderForm_'+t+'" name="commit" type="submit" value="Add Star"></form>')});g("a.clear_all").removeClass("link_disabled");g.post("/folder/clear",{_method:"delete"})}return false})}function f(r){var r=g(r);r.find("a.next_page, a.prev_page, a.sort_change").click(function(){g("body").css("cursor","progress");r.find("ul.facet_extended_list").animate({opacity:0});r.load(this.href,function(){f(r);g("body").css("cursor","auto");var s=r.find("h1, h2, h3, h4, h5, h6").eq(0).remove();if(s.size()>0){r.dialog("option","title",s.text())}});return false})}function p(r){r=g(r);r.dialog("option","height",641);r.dialog("option","width",804);r.dialog("option","position",["center",75]);r.dialog("open").dialog("moveToTop");window.scrollTo(0,r.offset().top-70)}function j(){g("#PerPageSelector").change(function(){g("#PerPageContainer form").submit()});g("#SortSelector").change(function(){g("#SortFormContainer form").submit()})}function b(){g(".catalog-page .no-items-ask").click(function(){g(".libraryh3lp-container").show();return false})}function o(){m();e();a();n();i();h();q();k();j();b()}g.extend({getUrlVars:function(){var u=[],t;var r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var s=0;s<r.length;s++){t=r[s].split("=");u.push(t[0]);u[t[0]]=t[1]}return u},getUrlVar:function(r){return g.getUrlVars()[r]}});o();g(document).ajaxSend(function(t,u,r){var s=g("meta[name='csrf-token']").attr("content");u.setRequestHeader("X-CSRF-Token",s)})});