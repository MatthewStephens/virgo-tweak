$(document).ready(function(){$("a.more_facets_link, a.lightboxLink").each(function(){$(this).colorbox({iframe:true,rel:"nofollow",innerHeight:"460px",innerWidth:"606px",opacity:0.7});$(this).attr("href",$(this).attr("href")+"&complete=true")});$(".availability a").each(function(){var b=$(this).parents(".document").attr("id").replace(/^Doc/,"");var a="/catalog/"+b+"/status";$(this).colorbox({href:a,rel:"nofollow",opacity:0.7})});$(".which-search").click(function(){$(".which-search-help").slideToggle();return false});$("input[name=catalog_select]").change(function(){var a=$(this).val();var b=$("#SI");switch(a){case"catalog":b.attr("placeholder","Search for books, maps, DVDs, and other catalog materials.");break;case"articles":b.attr("placeholder","Search for articles from subscription journal databases.");break;default:b.attr("placeholder","Search for books, articles, digital materials, and more.")}});$(".imageCollection a").each(function(a){$(this).colorbox({rel:$(this).attr("data-group"),maxHeight:"100%",photo:true,maxWidth:"95%",scalePhotos:true,opacity:0.7,current:"{current} of {total}"})});$(".single-copy").each(function(c){var a=$(this);var b=a.parent().attr("id").split("availability_")[1];a.load("/catalog/"+b+"/brief_availability")})});var debugging=false;if(typeof console=="undefined"||typeof console.log=="undefined"){var console={log:function(){}}}else{if(!debugging&&typeof console!="undefined"){console.log=function(){}}}jQuery(document).ready(function(e){e.ajaxSetup({timeout:20000});function n(){var s=null;e("span.coverImage").not(".combined-results span.coverImage").each(function(u,w){var v=e(w);var t=v.attr("title");e.get("/catalog/"+t+"/image_load",function(y){var x=e(y);v.html(x)})})}function c(){if(e("#article_results_container").length>0){var v=e.getUrlVar("q");var s="";if(v){s="/articles?q="+v+"&catalog_select=all"}else{var u=e.getUrlVar("author")||"";var x=e.getUrlVar("journal")||"";var w=e.getUrlVar("title")||"";var t=e.getUrlVar("keyword")||"";s="/articles?search_field=advanced&author="+u+"&journal="+x+"&title="+w+"&keyword="+t+"&catalog_select=all"}e("#article_results_container").load(s,function(){e("#article_results_container").css("background","#FFF")})}}function g(){if(e("#folder_article_container").length>0){load_url="/folder/articles";e("#folder_article_container").load(load_url,function(){e("#folder_article_container").css("background","#FFF")})}}function j(){e(".addUserBookmarkForm .submitForm").click(function(t){t.preventDefault();var s=e(this);s.parent().html('This item is in <a href="/bookmarks">My Favorites</a>');s.parent().ajaxSubmit()})}function i(){e(".addFolderForm .submitForm").live("click",function(){var u={dataType:"json",beforeSubmit:t,success:s};var v=e(this).parent();v.ajaxSubmit(u);function t(y,x,w){v.children(".submitForm").addClass("saving-star");return true}function s(y,z,A,w){if(v.children("input[name='id']").length){var x=v.children("input[name='id']").val()}else{var x=v.children("input[name='article_id']").val()}v.closest(".folder_container").html('<a href="/folder/'+x+'" class="deleteFolder_link">Remove Star</a>');b(y.length)}return false});e(".deleteFolder_link").live("click",function(){var t=e(this);var s=e(this).attr("href").substring(8);t.closest(".folder_container").html('<form action="/folder" class="addFolderForm" method="post" name="folder'+s+'"><input id="id" name="id" type="hidden" value="'+s+'"><a href="/folder" class="submitForm">Add Star</a><input class="hide" id="submitFolderForm_'+s+'" name="commit" type="submit" value="Add Star"></form>');e.post(t.attr("href"),{_method:"delete"});return false})}function b(s){if(s>=100){e(document).colorbox({html:'<div id="folder_full_notice">You may only save up to 100 items in your starred item list.  Please <a href="/folder">view and export</a> any items you wish to preserve then <a class="clear_all close-notice" href="/folder/clear">clear the list</a> to add more items.</div>',open:true,title:"Starred Item List Full",height:"40%",width:"40%"})}}e(".close-notice").live("click",function(){e(document).colorbox.close()});function k(){e(".action_list").hover(function(){e(".list_body").show()},function(){e(".list_body").hide()})}function a(){var t=new Array();var s=e(".deleteFolder_link");s.each(function(u){t[u]=e(this).attr("href").substring(8)});return t}function o(){var t=new Array();var s=e(".addFolderForm .submitForm");s.each(function(u){if(e(this).siblings("input[name='id']").length){t[u]=e(this).siblings("input[name='id']").val()}else{t[u]=e(this).siblings("input[name='article_id']").val()}});return t}function p(){e("a.select_all").click(function(){var u=o();if(e(u).length>0){var t=e(this);var s=e("body.articles-page").length?{"article_id[]":u}:{"id[]":u};e.ajax({url:"/folder",type:"POST",dataType:"json",data:s,beforeSend:function(w,v){e(".addFolderForm .submitForm").addClass("saving-star");t.addClass("link_disabled")},success:function(w,x,v){e(".addFolderForm .submitForm").each(function(z){var y=e(this).siblings("input[name='id']").val();e(this).closest(".folder_container").html('<a href="/folder/'+y+'" class="deleteFolder_link">Remove Star</a>')});b(w.length);t.removeClass("link_disabled")}})}return false})}function f(){e("a.clear_all").live("click",function(t){var s=a();if(e(s).length>0){e(this).addClass("link_disabled");e(".deleteFolder_link").each(function(v){var w=e(this);var u=e(this).attr("href").substring(8);w.closest(".folder_container").html('<form action="/folder" class="addFolderForm" method="post" name="folder'+u+'"><input id="id" name="id" type="hidden" value="'+u+'"><a href="/folder" class="submitForm">Add Star</a><input class="hide" id="submitFolderForm_'+u+'" name="commit" type="submit" value="Add Star"></form>')});e("a.clear_all").removeClass("link_disabled");e.post("/folder/clear",{_method:"delete"})}return false})}function q(s){var s=e(s);s.find("a.next_page, a.prev_page, a.sort_change").click(function(){e("body").css("cursor","progress");s.find("ul.facet_extended_list").animate({opacity:0});s.load(this.href,function(){q(s);e("body").css("cursor","auto");var t=s.find("h1, h2, h3, h4, h5, h6").eq(0).remove();if(t.size()>0){s.dialog("option","title",t.text())}});return false})}function m(s){s=e(s);s.dialog("option","height",641);s.dialog("option","width",804);s.dialog("option","position",["center",75]);s.dialog("open").dialog("moveToTop");window.scrollTo(0,s.offset().top-70)}function d(){e("#PerPageSelector").change(function(){e("#PerPageContainer form").submit()});e("#SortSelector").change(function(){e("#SortFormContainer form").submit()})}function r(){e(".catalog-page .no-items-ask").click(function(){e(".libraryh3lp-container").show();return false})}function h(){e("a[data-counter]").click(function(t){var u=document.createElement("form");u.style.display="none";this.parentNode.appendChild(u);u.method="POST";u.action=e(this).attr("href");if(t.metaKey||t.ctrlKey){u.target="_blank"}var v=document.createElement("input");v.setAttribute("type","hidden");v.setAttribute("name","counter");v.setAttribute("value",e(this).attr("data-counter"));u.appendChild(v);var s=document.createElement("input");s.setAttribute("type","hidden");s.setAttribute("name","_method");s.setAttribute("value","put");u.appendChild(s);var s=document.createElement("input");s.setAttribute("type","hidden");s.setAttribute("name",e('meta[name="csrf-param"]').attr("content"));s.setAttribute("value",e('meta[name="csrf-token"]').attr("content"));u.appendChild(s);u.submit();return false})}function l(){n();j();i();k();p();f();c();g();d();r();h()}e.extend({getUrlVars:function(){var v=[],u;var s=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var t=0;t<s.length;t++){u=s[t].split("=");v.push(u[0]);v[u[0]]=u[1]}return v},getUrlVar:function(s){return e.getUrlVars()[s]}});l();e(document).ajaxSend(function(u,v,s){var t=e("meta[name='csrf-token']").attr("content");v.setRequestHeader("X-CSRF-Token",t)})});jQuery(function(){var b=jQuery;b(".tabNavigation li a").click(function(){var c=b(this).attr("href");b(c).find("input[@type=text]").focus()});b(".searchInHome:first").focus();b("#FilterQueryFields").change(function(){b(".searchIn",b(this).parent().parent()).focus()});var a=function(g){var d=b("#MainSearch form",b(g.target).parents());var c=b("select option:selected",d);var f=c.val();if(f!=""){b(".searchIn",d).attr("name","fq["+f+"][]")}d.submit()};b("#MainSearch button").click(a);b(".searchIn").keypress(function(c){if(c.which==13){a(c)}})});/*
 * jQuery Form Plugin
 * version: 2.07 (03/04/2008)
 * @requires jQuery v1.2.2 or later
 *
 * Examples at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id$
 */
(function(a){a.fn.ajaxSubmit=function(l){if(typeof l=="function"){l={success:l}}l=a.extend({url:this.attr("action")||window.location.toString(),type:this.attr("method")||"GET"},l||{});var o={};this.trigger("form-pre-serialize",[this,l,o]);if(o.veto){return this}var g=this.formToArray(l.semantic);if(l.data){l.extraData=l.data;for(var d in l.data){g.push({name:d,value:l.data[d]})}}if(l.beforeSubmit&&l.beforeSubmit(g,this,l)===false){return this}this.trigger("form-submit-validate",[g,this,l,o]);if(o.veto){return this}var c=a.param(g);if(l.type.toUpperCase()=="GET"){l.url+=(l.url.indexOf("?")>=0?"&":"?")+c;l.data=null}else{l.data=c}var m=this,f=[];if(l.resetForm){f.push(function(){m.resetForm()})}if(l.clearForm){f.push(function(){m.clearForm()})}if(!l.dataType&&l.target){var i=l.success||function(){};f.push(function(j){a(l.target).html(j).each(i,arguments)})}else{if(l.success){f.push(l.success)}}l.success=function(q,n){for(var p=0,j=f.length;p<j;p++){f[p](q,n,m)}};var b=a("input:file",this).fieldValue();var k=false;for(var e=0;e<b.length;e++){if(b[e]){k=true}}if(l.iframe||k){if(a.browser.safari&&l.closeKeepAlive){a.get(l.closeKeepAlive,h)}else{h()}}else{a.ajax(l)}this.trigger("form-submit-notify",[this,l]);return this;function h(){var q=m[0];var n=a.extend({},a.ajaxSettings,l);var p="jqFormIO"+(new Date().getTime());var u=a('<iframe id="'+p+'" name="'+p+'" />');var w=u[0];var x=a.browser.opera&&window.opera.version()<9;if(a.browser.msie||x){w.src='javascript:false;document.write("");'}u.css({position:"absolute",top:"-1000px",left:"-1000px"});var y={responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){}};var v=n.global;if(v&&!a.active++){a.event.trigger("ajaxStart")}if(v){a.event.trigger("ajaxSend",[y,n])}var j=0;var r=0;setTimeout(function(){var B=m.attr("target"),z=m.attr("action");m.attr({target:p,encoding:"multipart/form-data",enctype:"multipart/form-data",method:"POST",action:n.url});if(n.timeout){setTimeout(function(){r=true;s()},n.timeout)}var A=[];try{if(l.extraData){for(var C in l.extraData){A.push(a('<input type="hidden" name="'+C+'" value="'+l.extraData[C]+'" />').appendTo(q)[0])}}u.appendTo("body");w.attachEvent?w.attachEvent("onload",s):w.addEventListener("load",s,false);q.submit()}finally{m.attr("action",z);B?m.attr("target",B):m.removeAttr("target");a(A).remove()}},10);function s(){if(j++){return}w.detachEvent?w.detachEvent("onload",s):w.removeEventListener("load",s,false);var A=true;try{if(r){throw"timeout"}var B,D;D=w.contentWindow?w.contentWindow.document:w.contentDocument?w.contentDocument:w.document;y.responseText=D.body?D.body.innerHTML:null;y.responseXML=D.XMLDocument?D.XMLDocument:D;y.getResponseHeader=function(F){var E={"content-type":n.dataType};return E[F]};if(n.dataType=="json"||n.dataType=="script"){var z=D.getElementsByTagName("textarea")[0];y.responseText=z?z.value:y.responseText}else{if(n.dataType=="xml"&&!y.responseXML&&y.responseText!=null){y.responseXML=t(y.responseText)}}B=a.httpData(y,n.dataType)}catch(C){A=false;a.handleError(n,y,"error",C)}if(A){n.success(B,"success");if(v){a.event.trigger("ajaxSuccess",[y,n])}}if(v){a.event.trigger("ajaxComplete",[y,n])}if(v&&!--a.active){a.event.trigger("ajaxStop")}if(n.complete){n.complete(y,A?"success":"error")}setTimeout(function(){u.remove();y.responseXML=null},100)}function t(z,A){if(window.ActiveXObject){A=new ActiveXObject("Microsoft.XMLDOM");A.async="false";A.loadXML(z)}else{A=(new DOMParser()).parseFromString(z,"text/xml")}return(A&&A.documentElement&&A.documentElement.tagName!="parsererror")?A:null}}};a.fn.ajaxForm=function(b){return this.ajaxFormUnbind().bind("submit.form-plugin",function(){a(this).ajaxSubmit(b);return false}).each(function(){a(":submit,input:image",this).bind("click.form-plugin",function(d){var c=this.form;c.clk=this;if(this.type=="image"){if(d.offsetX!=undefined){c.clk_x=d.offsetX;c.clk_y=d.offsetY}else{if(typeof a.fn.offset=="function"){var f=a(this).offset();c.clk_x=d.pageX-f.left;c.clk_y=d.pageY-f.top}else{c.clk_x=d.pageX-this.offsetLeft;c.clk_y=d.pageY-this.offsetTop}}}setTimeout(function(){c.clk=c.clk_x=c.clk_y=null},10)})})};a.fn.ajaxFormUnbind=function(){this.unbind("submit.form-plugin");return this.each(function(){a(":submit,input:image",this).unbind("click.form-plugin")})};a.fn.formToArray=function(p){var o=[];if(this.length==0){return o}var c=this[0];var g=p?c.getElementsByTagName("*"):c.elements;if(!g){return o}for(var h=0,l=g.length;h<l;h++){var d=g[h];var e=d.name;if(!e){continue}if(p&&c.clk&&d.type=="image"){if(!d.disabled&&c.clk==d){o.push({name:e+".x",value:c.clk_x},{name:e+".y",value:c.clk_y})}continue}var q=a.fieldValue(d,true);if(q&&q.constructor==Array){for(var f=0,b=q.length;f<b;f++){o.push({name:e,value:q[f]})}}else{if(q!==null&&typeof q!="undefined"){o.push({name:e,value:q})}}}if(!p&&c.clk){var k=c.getElementsByTagName("input");for(var h=0,l=k.length;h<l;h++){var m=k[h];var e=m.name;if(e&&!m.disabled&&m.type=="image"&&c.clk==m){o.push({name:e+".x",value:c.clk_x},{name:e+".y",value:c.clk_y})}}}return o};a.fn.formSerialize=function(b){return a.param(this.formToArray(b))};a.fn.fieldSerialize=function(c){var b=[];this.each(function(){var g=this.name;if(!g){return}var e=a.fieldValue(this,c);if(e&&e.constructor==Array){for(var f=0,d=e.length;f<d;f++){b.push({name:g,value:e[f]})}}else{if(e!==null&&typeof e!="undefined"){b.push({name:this.name,value:e})}}});return a.param(b)};a.fn.fieldValue=function(g){for(var f=[],d=0,b=this.length;d<b;d++){var e=this[d];var c=a.fieldValue(e,g);if(c===null||typeof c=="undefined"||(c.constructor==Array&&!c.length)){continue}c.constructor==Array?a.merge(f,c):f.push(c)}return f};a.fieldValue=function(b,h){var d=b.name,o=b.type,p=b.tagName.toLowerCase();if(typeof h=="undefined"){h=true}if(h&&(!d||b.disabled||o=="reset"||o=="button"||(o=="checkbox"||o=="radio")&&!b.checked||(o=="submit"||o=="image")&&b.form&&b.form.clk!=b||p=="select"&&b.selectedIndex==-1)){return null}if(p=="select"){var j=b.selectedIndex;if(j<0){return null}var l=[],c=b.options;var f=(o=="select-one");var k=(f?j+1:c.length);for(var e=(f?j:0);e<k;e++){var g=c[e];if(g.selected){var m=a.browser.msie&&!(g.attributes.value.specified)?g.text:g.value;if(f){return m}l.push(m)}}return l}return b.value};a.fn.clearForm=function(){return this.each(function(){a("input,select,textarea",this).clearFields()})};a.fn.clearFields=a.fn.clearInputs=function(){return this.each(function(){var c=this.type,b=this.tagName.toLowerCase();if(c=="text"||c=="password"||b=="textarea"){this.value=""}else{if(c=="checkbox"||c=="radio"){this.checked=false}else{if(b=="select"){this.selectedIndex=-1}}}})};a.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};a.fn.enable=function(c){if(c==undefined){c=true}return this.each(function(){this.disabled=!c})};a.fn.select=function(b){if(b==undefined){b=true}return this.each(function(){var c=this.type;if(c=="checkbox"||c=="radio"){this.checked=b}else{if(this.tagName.toLowerCase()=="option"){var d=a(this).parent("select");if(b&&d[0]&&d[0].type=="select-one"){d.find("option").select(false)}this.selected=b}}})}})(jQuery);